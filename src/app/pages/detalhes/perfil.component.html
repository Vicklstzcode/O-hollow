<div class="min-h-screen relative flex flex-col">
  <canvas id="particles-canvas"></canvas>

  <app-navbar [favoritesCount]="0">
    <!-- Esta página não precisa de ações na navbar -->
  </app-navbar>

  <main class="flex-grow pt-24 px-4 sm:px-6 lg:px-8 w-full">
    <div class="max-w-3xl mx-auto mb-8">
      <button
        (click)="voltarPagina()"
        class="inline-flex items-center gap-2 text-gray-400 hover:text-white transition-colors group cursor-pointer"
      >
        <i
          data-lucide="arrow-left"
          class="w-4 h-4 group-hover:-translate-x-1 transition-transform"
        ></i>
        Voltar
      </button>
    </div>

    <div
      *ngIf="usuario"
      class="max-w-3xl mx-auto glass-panel p-8 rounded-2xl animate-fade-in-up"
    >
      <div class="flex flex-col sm:flex-row items-center gap-6 mb-8">
        <div class="relative group">
          <input
            type="file"
            #profileImageInput
            (change)="onProfileImageSelected($event)"
            accept="image/*"
            class="hidden"
          />
          <div
            class="w-24 h-24 rounded-full bg-purple-500/20 flex items-center justify-center border-2 border-purple-400 overflow-hidden cursor-pointer"
            (click)="profileImageInput.click()"
          >
            <img
              *ngIf="usuario?.profileImageUrl; else defaultUserIcon"
              [src]="usuario.profileImageUrl"
              alt="Profile"
              class="w-full h-full object-cover"
            />
            <ng-template #defaultUserIcon>
              <i data-lucide="user" class="w-12 h-12 text-purple-300"></i>
            </ng-template>
          </div>
          <div
            class="absolute inset-0 rounded-full bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 cursor-pointer"
            (click)="profileImageInput.click()"
          >
            <i data-lucide="camera" class="w-8 h-8 text-white"></i>
          </div>
        </div>
        <div>
          <h1 class="text-4xl font-bold text-white text-center sm:text-left">
            {{ usuario.name }}
          </h1>
          <p class="text-gray-400 text-center sm:text-left">
            {{ usuario.email }}
          </p>
        </div>
      </div>

      <div class="space-y-6">
        <!-- Dados Pessoais -->
        <div>
          <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
            <i data-lucide="file-text" class="w-5 h-5 text-cyan-400"></i>
            Dados Pessoais
          </h3>
          <div class="space-y-4">
            <div>
              <label
                for="nome"
                class="block text-sm font-medium text-gray-400 mb-1"
                >Nome de Usuário</label
              >
              <input
                type="text"
                id="nome"
                [(ngModel)]="nomeUsuario"
                class="form-input"
              />
            </div>
            <div>
              <label
                for="email"
                class="block text-sm font-medium text-gray-400 mb-1"
                >Endereço de E-mail</label
              >
              <input
                type="email"
                id="email"
                [(ngModel)]="emailUsuario"
                class="form-input"
              />
            </div>
          </div>
        </div>

        <!-- Segurança -->
        <div>
          <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
            <i data-lucide="lock" class="w-5 h-5 text-red-400"></i>
            Segurança
          </h3>
          <div class="space-y-4">
            <div>
              <label
                for="currentPassword"
                class="block text-sm font-medium text-gray-400 mb-1"
                >Senha Atual</label
              >
              <input
                type="password"
                id="currentPassword"
                [(ngModel)]="currentPassword"
                class="form-input"
              />
            </div>
            <div>
              <label
                for="newPassword"
                class="block text-sm font-medium text-gray-400 mb-1"
                >Nova Senha</label
              >
              <input
                type="password"
                id="newPassword"
                [(ngModel)]="newPassword"
                class="form-input"
              />
            </div>
            <div>
              <label
                for="confirmNewPassword"
                class="block text-sm font-medium text-gray-400 mb-1"
                >Confirmar Nova Senha</label
              >
              <input
                type="password"
                id="confirmNewPassword"
                [(ngModel)]="confirmNewPassword"
                class="form-input"
              />
            </div>
            <button
              (click)="alterarSenha()"
              class="w-full sm:w-auto px-5 py-2 border border-white/20 rounded-full text-sm font-medium hover:bg-white/10 transition-colors"
            >
              Alterar Senha
            </button>
          </div>
        </div>
      </div>

      <div class="mt-10 pt-6 border-t border-white/10 flex justify-end">
        <button
          (click)="salvarAlteracoes()"
          class="px-8 py-3 bg-purple-600 hover:bg-purple-700 rounded-full text-sm font-bold transition-colors"
        >
          Salvar Alterações
        </button>
      </div>
    </div>
  </main>
</div>
